{"remainingRequest":"/web/vue/19-项目开发/supermall/node_modules/vue-loader/lib/index.js??vue-loader-options!/web/vue/19-项目开发/supermall/src/views/detail/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/web/vue/19-项目开发/supermall/src/views/detail/Detail.vue","mtime":1595925215015},{"path":"/web/vue/19-项目开发/supermall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/web/vue/19-项目开发/supermall/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/web/vue/19-项目开发/supermall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/web/vue/19-项目开发/supermall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxOYXZCYXIgZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbE5hdkJhciI7CmltcG9ydCBEZXRhaWxTd2lwZXIgZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbFN3aXBlciI7CmltcG9ydCBEZXRhaWxCYXNlSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQmFzZUluZm8iOwppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbFNob3BJbmZvIjsKaW1wb3J0IERldGFpbEdvb2RzSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsR29vZHNJbmZvIjsKaW1wb3J0IERldGFpbFBhcmFtSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsUGFyYW1JbmZvIjsKaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxDb21tZW50SW5mbyI7CmltcG9ydCBEZXRhaWxCb3R0b21CYXIgZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbEJvdHRvbUJhciI7CgppbXBvcnQgU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiCmltcG9ydCBHb29kc0xpc3QgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2dvb2RzL0dvb2RzTGlzdCI7CmltcG9ydCB7ZGVib3VuY2V9IGZyb20gImNvbW1vbi91dGlscyI7CgppbXBvcnQge2dldERldGFpbCwgR29vZHMsIFNob3AsIEdvb2RzUGFyYW19IGZyb20gIm5ldHdvcmsvZGV0YWlsIjsKaW1wb3J0IHtnZXRSZWNvbW1lbmR9IGZyb20gIm5ldHdvcmsvZGV0YWlsIjsKaW1wb3J0IHtiYWNrVG9wTWl4aW59IGZyb20gImNvbW1vbi9taXhpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRldGFpbCIsCiAgY29tcG9uZW50czogewogICAgRGV0YWlsTmF2QmFyLAogICAgRGV0YWlsU3dpcGVyLAogICAgRGV0YWlsQmFzZUluZm8sCiAgICBEZXRhaWxTaG9wSW5mbywKICAgIERldGFpbEdvb2RzSW5mbywKICAgIERldGFpbFBhcmFtSW5mbywKICAgIERldGFpbENvbW1lbnRJbmZvLAogICAgU2Nyb2xsLAogICAgR29vZHNMaXN0LAogICAgRGV0YWlsQm90dG9tQmFyCiAgfSwKICBtaXhpbnM6IFtiYWNrVG9wTWl4aW5dLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpaWQ6IG51bGwsCiAgICAgIHRvcEltYWdlczogW10sCiAgICAgIGdvb2RzOiB7fSwKICAgICAgc2hvcDoge30sCiAgICAgIGRldGFpbEluZm86IHt9LAogICAgICBwYXJhbUluZm86IHt9LAogICAgICBjb21tZW50SW5mbzoge30sCiAgICAgIHJlY29tbWVuZHM6IFtdLAogICAgICB0aGVtZVRvcFlzOiBbXSwKICAgICAgZ2V0VGhlbWVUb3BZOiBudWxsLAogICAgICBjdXJyZW50SW5kZXg6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLzHjgIHojrflj5ZpaWQKICAgIHRoaXMuaWlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlpZAogICAgLy8y44CB5qC55o2uaWlk6K+35rGC6K+m5oOF5pWw5o2uCiAgICBnZXREZXRhaWwodGhpcy5paWQpLnRoZW4ocmVzID0+IHsKICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgY29uc3QgZGF0YSA9IHJlcy5yZXN1bHQ7CiAgICAgIC8vMuOAgeiOt+WPlumhtumDqOeahOWbvueJh+aVsOaNrgogICAgICB0aGlzLnRvcEltYWdlcyA9IGRhdGEuaXRlbUluZm8udG9wSW1hZ2VzCiAgICAgIC8vM+OAgeiOt+WPluWVhuWTgeWfuuacrOS/oeaBrwogICAgICB0aGlzLmdvb2RzID0gbmV3IEdvb2RzKGRhdGEuaXRlbUluZm8sZGF0YS5jb2x1bW5zLGRhdGEuc2hvcEluZm8uc2VydmljZXMpCiAgICAgIC8vNOOAgeiOt+WPluW6l+mTuuS/oeaBrwogICAgICB0aGlzLnNob3AgPSBuZXcgU2hvcChkYXRhLnNob3BJbmZvKQogICAgICAvLzXjgIHojrflj5bllYblk4Hor6bnu4bkv6Hmga8KICAgICAgdGhpcy5kZXRhaWxJbmZvID0gZGF0YS5kZXRhaWxJbmZvCiAgICAgIC8vNuOAgeiOt+WPluWVhuWTgeWPguaVsOS/oeaBrwogICAgICB0aGlzLnBhcmFtSW5mbyA9IG5ldyBHb29kc1BhcmFtKGRhdGEuaXRlbVBhcmFtcy5pbmZvLGRhdGEuaXRlbVBhcmFtcy5ydWxlKQogICAgICAvLzfjgIHojrflj5bllYblk4Hor4Torrrkv6Hmga8o5pyJ55qE5ZWG5ZOB5rKh5pyJ6K+E6K6677yM5omA5Lul6ZyA6KaB5YWI5YGa5LiA5Liq5Yik5patKQogICAgICBpZihkYXRhLnJhdGUuY1JhdGUgIT09IDApIHsKICAgICAgICB0aGlzLmNvbW1lbnRJbmZvID0gZGF0YS5yYXRlLmxpc3RbMF0KICAgICAgfQogICAgICAvL25leHRUaWNr6L+Z5Liq5Ye95pWw77yM5piv5qC55o2u5pyA5paw55qE5pWw5o2u77yM5a+55bqU55qERE9N5bey57uP6KKr5riy5p+T5Ye65p2l5LqG77yM5L2G5piv5Zu+54mH5L6d54S25rKh5pyJ5Yqg6L295a6MCiAgICAgIC8v5omA5Lul6I635Y+W5Yiw55qEb2Zmc2V0VG9w55qE5YC85piv5LiN5YyF5ous5Zu+54mH55qE77yM5pyJ6ZSZ6K+vCiAgICAgIC8vIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgLy8gICB0aGlzLnRoZW1lVG9wWXMgPSBbXQogICAgICAvLwogICAgICAvLyAgIHRoaXMudGhlbWVUb3BZcy5wdXNoKDApOwogICAgICAvLyAgIC8v5Y+C5pWw55qEb2Zmc2V0VG9wCiAgICAgIC8vICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5wYXJhbXMuJGVsLm9mZnNldFRvcCk7CiAgICAgIC8vICAgLy/or4TorrrnmoRvZmZzZXRUb3AKICAgICAgLy8gICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCk7CiAgICAgIC8vICAgLy/mjqjojZDnmoRvZmZzZXRUb3AKICAgICAgLy8gICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnJlY29tbWVuZC4kZWwub2Zmc2V0VG9wKTsKICAgICAgLy8KICAgICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLnRoZW1lVG9wWXMpOwogICAgICAvLyB9KQoKICAgIH0pCiAgICAvLzPjgIHor7fmsYLllYblk4HmjqjojZDmlbDmja4KICAgIGdldFJlY29tbWVuZCgpLnRoZW4ocmVzID0+IHsKICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgdGhpcy5yZWNvbW1lbmRzID0gcmVzLmRhdGEubGlzdAogICAgfSkKICAgIC8vNOOAgee7mWdldFRoZW1lVG9wWei1i+WAvCjlr7nnu5l0aGlzLnRoZW1lVG9wWXPotYvlgLznmoTmk43kvZzov5vooYzpmLLmipYpCiAgICB0aGlzLmdldFRoZW1lVG9wWSA9IGRlYm91bmNlKCgpID0+IHsKICAgICAgdGhpcy50aGVtZVRvcFlzID0gW10KICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goMCk7CiAgICAgIC8v5Y+C5pWw55qEb2Zmc2V0VG9w77yM5YeP5Y676aG26YOo5a+86Iiq55qE6auY5bqmNDRweAogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnBhcmFtcy4kZWwub2Zmc2V0VG9wIC0gNDQpOwogICAgICAvL+ivhOiuuueahG9mZnNldFRvcAogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCAtIDQ0KTsKICAgICAgLy/mjqjojZDnmoRvZmZzZXRUb3AKICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCAtIDQ0KTsKICAgICAgLy/nu5nmlbDnu4Tmt7vliqDkuIDkuKrmnIDlpKflgLwKICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goTnVtYmVyLk1BWF9WQUxVRSkKCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGhlbWVUb3BZcyk7CiAgICB9LDEwMCkKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvL+WbvueJh+WKoOi9veWujOaIkOeahOS6i+S7tuebkeWQrAogICAgY29uc3QgcmVmcmVzaCA9IGRlYm91bmNlKHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2gsMjAwKQogICAgLy/nm5HlkKxHb29kc0xpc3RJdGVt5Lit5Zu+54mH5Yqg6L295a6M5oiQCiAgICB0aGlzLiRidXMuJG9uKCdkZXRhaWxJdGVtSW1hZ2VMb2FkJywoKSA9PiB7CiAgICAgIHJlZnJlc2goKQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGltYWdlTG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgICAgIHRoaXMuZ2V0VGhlbWVUb3BZKCkKICAgIH0sCiAgICB0aXRsZUNsaWNrKGluZGV4KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwtdGhpcy50aGVtZVRvcFlzW2luZGV4XSwyMDApCiAgICB9LAogICAgY29udGVudFNjcm9sbChwb3NpdGlvbikgewogICAgICAvLyBjb25zb2xlLmxvZyhwb3NpdGlvbik7CiAgICAgIC8vMeOAgeiOt+WPlua7muWKqOeahFnlgLwKICAgICAgY29uc3QgcG9zaXRpb25ZID0gLXBvc2l0aW9uLnkKICAgICAgLy8y44CBcG9zaXRpb25Z5ZKM5Li76aKY5Lit5YC86L+b6KGM5a+55q+U77yM5Yaz5a6a5b2T5YmN5bqU6K+l5pi+56S65ZOq5LiqaW5kZXgKICAgICAgLy/CoOWmguaenOW9k+WJjeS4u+mimOeahOWAvOS4ulswLCA2MjExLCA3MDI5LCA3MjQ0XQogICAgICAvLyBjb25zb2xlLmxvZyhOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgLy8gcG9zaXRpb25ZIOWkp+S6juetieS6jjAg5ZKMIOWwj+S6jjYyMTEg5LmL6Ze077yMaW5kZXggPSAwCiAgICAgIC8vIHBvc2l0aW9uWSDlpKfkuo7nrYnkuo42MjExIOWSjCDlsI/kuo43MDI5IOS5i+mXtO+8jGluZGV4ID0gMQogICAgICAvLyBwb3NpdGlvblkg5aSn5LqO562J5LqONzAyOSDlkowg5bCP5LqONzI0NCDkuYvpl7TvvIxpbmRleCA9IDIKICAgICAgLy8gcG9zaXRpb25ZIOWkp+S6juetieS6jjcyNDQg5YC877yMaW5kZXggPSAzCiAgICAgIGxldCBsZW5ndGggPSB0aGlzLnRoZW1lVG9wWXMubGVuZ3RoCiAgICAgIC8v5Zug5Li66aKd5aSW5re75Yqg5LqG5LiA5Liq5pyA5aSn5YC877yM5pyA5ZCO5LiA5Liq5YC85rKh5pyJ5oSP5LmJ77yM5omA5Lul5Y+q6KaB6YGN5Y6G5YmN5Zub5Liq5YC85Y2z5Y+vCiAgICAgIGZvcihsZXQgaT0wOyBpIDwgbGVuZ3RoLTE7IGkrKykgewogICAgICAgIC8vIGlmKHRoaXMuY3VycmVudEluZGV4ICE9PSBpICYmICgoaSA8IGxlbmd0aCAtIDEgJiYgcG9zaXRpb25ZID49IHRoaXMudGhlbWVUb3BZc1tpXSAmJiBwb3NpdGlvblkgPCB0aGlzLnRoZW1lVG9wWXNbaSsxXSkgfHwgKGkgPT09IGxlbmd0aCAtMSAmJiBwb3NpdGlvblkgPj0gdGhpcy50aGVtZVRvcFlzW2ldKSkpewogICAgICAgIC8vICAgdGhpcy5jdXJyZW50SW5kZXggPSBpOwogICAgICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50SW5kZXgpOwogICAgICAgIC8vICAgdGhpcy4kcmVmcy5uYXYuY3VycmVudEluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXgKICAgICAgICAvLyB9CiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ICE9PWkgJiYgKHBvc2l0aW9uWSA+PSB0aGlzLnRoZW1lVG9wWXNbaV0gJiYgcG9zaXRpb25ZIDwgdGhpcy50aGVtZVRvcFlzW2krMV0gKSkgewogICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpOwogICAgICAgICAgdGhpcy4kcmVmcy5uYXYuY3VycmVudEluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXgKICAgICAgICB9CiAgICAgICAgLy/liKTmlq1CYWNrVG9w5piv5ZCm5pi+56S6CiAgICAgICAgdGhpcy5pc1Nob3dCYWNrVG9wID0gKC1wb3NpdGlvbi55KSA+IDgwMAogICAgICB9CiAgICB9LAogICAgYWRkVG9DYXJ0KCkgewogICAgICAvLzHjgIHojrflj5botK3nianovabpnIDopoHlsZXnpLrnmoTkv6Hmga8KICAgICAgY29uc3QgcHJvZHVjdCA9IHt9CiAgICAgIHByb2R1Y3QuaW1hZ2UgPSB0aGlzLnRvcEltYWdlc1swXTsKICAgICAgcHJvZHVjdC50aXRsZSA9IHRoaXMuZ29vZHMudGl0bGU7CiAgICAgIHByb2R1Y3QuZGVzYyA9IHRoaXMuZ29vZHMuZGVzYzsKICAgICAgcHJvZHVjdC5wcmljZSA9IHRoaXMuZ29vZHMucmVhbFByaWNlOwogICAgICBwcm9kdWN0LmlpZCA9IHRoaXMuaWlkOwogICAgICAvLzLjgIHlsIbllYblk4Hmt7vliqDliLDotK3nianovabph4wKICAgICAgY29uc29sZS5sb2cocHJvZHVjdCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n\n    <detail-nav-bar class=\"detail-nav\" @titleClick=\"titleClick\" ref=\"nav\"/>\n    <scroll class=\"content\"\n            ref=\"scroll\"\n            :probe-type=\"3\"\n            @scroll=\"contentScroll\">\n      <!--属性使用驼峰：topImages 传入值应该用-分隔 top-images -->\n      <detail-swiper :top-images=\"topImages\"/>\n      <detail-base-info :goods=\"goods\"></detail-base-info>\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\n      <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\"></detail-goods-info>\n      <detail-param-info :param-info=\"paramInfo\" ref=\"params\"></detail-param-info>\n      <detail-comment-info :comment-info=\"commentInfo\" ref=\"comment\"></detail-comment-info>\n      <goods-list :goods=\"recommends\" ref=\"recommend\"></goods-list>\n    </scroll>\n    <detail-bottom-bar @addCart=\"addToCart\"/>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"></back-top>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from \"./childComps/DetailNavBar\";\n  import DetailSwiper from \"./childComps/DetailSwiper\";\n  import DetailBaseInfo from \"./childComps/DetailBaseInfo\";\n  import DetailShopInfo from \"./childComps/DetailShopInfo\";\n  import DetailGoodsInfo from \"./childComps/DetailGoodsInfo\";\n  import DetailParamInfo from \"./childComps/DetailParamInfo\";\n  import DetailCommentInfo from \"./childComps/DetailCommentInfo\";\n  import DetailBottomBar from \"./childComps/DetailBottomBar\";\n\n  import Scroll from \"components/common/scroll/Scroll\"\n  import GoodsList from \"components/content/goods/GoodsList\";\n  import {debounce} from \"common/utils\";\n\n  import {getDetail, Goods, Shop, GoodsParam} from \"network/detail\";\n  import {getRecommend} from \"network/detail\";\n  import {backTopMixin} from \"common/mixin\";\n\n  export default {\n    name: \"Detail\",\n    components: {\n      DetailNavBar,\n      DetailSwiper,\n      DetailBaseInfo,\n      DetailShopInfo,\n      DetailGoodsInfo,\n      DetailParamInfo,\n      DetailCommentInfo,\n      Scroll,\n      GoodsList,\n      DetailBottomBar\n    },\n    mixins: [backTopMixin],\n    data() {\n      return {\n        iid: null,\n        topImages: [],\n        goods: {},\n        shop: {},\n        detailInfo: {},\n        paramInfo: {},\n        commentInfo: {},\n        recommends: [],\n        themeTopYs: [],\n        getThemeTopY: null,\n        currentIndex: 0\n      }\n    },\n    created() {\n      //1、获取iid\n      this.iid = this.$route.params.iid\n      //2、根据iid请求详情数据\n      getDetail(this.iid).then(res => {\n        // console.log(res);\n        const data = res.result;\n        //2、获取顶部的图片数据\n        this.topImages = data.itemInfo.topImages\n        //3、获取商品基本信息\n        this.goods = new Goods(data.itemInfo,data.columns,data.shopInfo.services)\n        //4、获取店铺信息\n        this.shop = new Shop(data.shopInfo)\n        //5、获取商品详细信息\n        this.detailInfo = data.detailInfo\n        //6、获取商品参数信息\n        this.paramInfo = new GoodsParam(data.itemParams.info,data.itemParams.rule)\n        //7、获取商品评论信息(有的商品没有评论，所以需要先做一个判断)\n        if(data.rate.cRate !== 0) {\n          this.commentInfo = data.rate.list[0]\n        }\n        //nextTick这个函数，是根据最新的数据，对应的DOM已经被渲染出来了，但是图片依然没有加载完\n        //所以获取到的offsetTop的值是不包括图片的，有错误\n        // this.$nextTick(() => {\n        //   this.themeTopYs = []\n        //\n        //   this.themeTopYs.push(0);\n        //   //参数的offsetTop\n        //   this.themeTopYs.push(this.$refs.params.$el.offsetTop);\n        //   //评论的offsetTop\n        //   this.themeTopYs.push(this.$refs.comment.$el.offsetTop);\n        //   //推荐的offsetTop\n        //   this.themeTopYs.push(this.$refs.recommend.$el.offsetTop);\n        //\n        //   console.log(this.themeTopYs);\n        // })\n\n      })\n      //3、请求商品推荐数据\n      getRecommend().then(res => {\n        // console.log(res);\n        this.recommends = res.data.list\n      })\n      //4、给getThemeTopY赋值(对给this.themeTopYs赋值的操作进行防抖)\n      this.getThemeTopY = debounce(() => {\n        this.themeTopYs = []\n        this.themeTopYs.push(0);\n        //参数的offsetTop，减去顶部导航的高度44px\n        this.themeTopYs.push(this.$refs.params.$el.offsetTop - 44);\n        //评论的offsetTop\n        this.themeTopYs.push(this.$refs.comment.$el.offsetTop - 44);\n        //推荐的offsetTop\n        this.themeTopYs.push(this.$refs.recommend.$el.offsetTop - 44);\n        //给数组添加一个最大值\n        this.themeTopYs.push(Number.MAX_VALUE)\n\n        // console.log(this.themeTopYs);\n      },100)\n    },\n    mounted() {\n      //图片加载完成的事件监听\n      const refresh = debounce(this.$refs.scroll.refresh,200)\n      //监听GoodsListItem中图片加载完成\n      this.$bus.$on('detailItemImageLoad',() => {\n        refresh()\n      })\n    },\n    methods: {\n      imageLoad() {\n        this.$refs.scroll.refresh()\n        this.getThemeTopY()\n      },\n      titleClick(index) {\n        // console.log(index);\n        this.$refs.scroll.scrollTo(0,-this.themeTopYs[index],200)\n      },\n      contentScroll(position) {\n        // console.log(position);\n        //1、获取滚动的Y值\n        const positionY = -position.y\n        //2、positionY和主题中值进行对比，决定当前应该显示哪个index\n        // 如果当前主题的值为[0, 6211, 7029, 7244]\n        // console.log(Number.MAX_VALUE);\n        // positionY 大于等于0 和 小于6211 之间，index = 0\n        // positionY 大于等于6211 和 小于7029 之间，index = 1\n        // positionY 大于等于7029 和 小于7244 之间，index = 2\n        // positionY 大于等于7244 值，index = 3\n        let length = this.themeTopYs.length\n        //因为额外添加了一个最大值，最后一个值没有意义，所以只要遍历前四个值即可\n        for(let i=0; i < length-1; i++) {\n          // if(this.currentIndex !== i && ((i < length - 1 && positionY >= this.themeTopYs[i] && positionY < this.themeTopYs[i+1]) || (i === length -1 && positionY >= this.themeTopYs[i]))){\n          //   this.currentIndex = i;\n          //   // console.log(this.currentIndex);\n          //   this.$refs.nav.currentIndex = this.currentIndex\n          // }\n          if (this.currentIndex !==i && (positionY >= this.themeTopYs[i] && positionY < this.themeTopYs[i+1] )) {\n            this.currentIndex = i;\n            this.$refs.nav.currentIndex = this.currentIndex\n          }\n          //判断BackTop是否显示\n          this.isShowBackTop = (-position.y) > 800\n        }\n      },\n      addToCart() {\n        //1、获取购物车需要展示的信息\n        const product = {}\n        product.image = this.topImages[0];\n        product.title = this.goods.title;\n        product.desc = this.goods.desc;\n        product.price = this.goods.realPrice;\n        product.iid = this.iid;\n        //2、将商品添加到购物车里\n        console.log(product);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #detail {\n    height: 100vh;\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n  }\n  .content {\n    height: calc(100% - 44px - 58px);\n  }\n  .detail-nav {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n  }\n</style>"]}]}